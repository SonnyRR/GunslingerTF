// ----------------------------------------------------------------------------
// Sonny's mixed performance config.
// ----------------------------------------------------------------------------
//===============================================================================
// Use dxlevel 80 or 81, IF you prefer dxlevel 90 or don't know how to set DX80, change mat_bumpmap to 1
// right click TF2 > properties > launch options > -dxlevel 80 or 81

//|| Launch Options

// -heapsize      ;; system memory/2 (x 1024) | [ 2048 / 2 (x 1024) =  1048576]
// -noforcemspd   ;; Use desktop mouse speed settings.
// -noforcemaccel ;; Use desktop mouse acceleration settings. 
// -window        ;; This enables tf2 to start in a window mode, instead of fullscreen.
// -full          ;; This runs tf2 in full screen mode.
// -freq          ;; Set the Refresh Rate
// -nocrashdialog ;; Suppresses some memory could not be read unhandled errors.
// -dev           ;; Enables developer mode. Also disables the automatic loading of menu background maps and stops the quit dialog from appearing on exit.

//|| Alternate internet options
//rate                                              "30000" // Max bytes/sec the host can receive data.
//cl_cmdrate                                        "66"    // Number of command pakets sent to the server per second.
//cl_interp                                         "0.02"  // Interpolate x seconds from game (0.02 = 20ms)
//cl_lagcompensation                                "1"     // Perform server side lag compensation of weapon firing events.
//cl_updaterate                                     "66"    // Number of packets per second you are requesting from the server.
//cl_smooth                                         "0"     // If set to 1 attempts to smooth the view after prediction errors.
//cl_smoothtime                                     "0.01"  // Time over which to smooth the view after prediction errors if cl_smooth is enabled.
//cl_interp_threadmodeticks                         "0"     // Additional interpolation ticks to use when interpolating with threaded engine mode set.
//cl_pred_optimize                                  "2"     // Optimize for not copying data if didn't receive a network update (1), and also for not repredicting if there were no errors (2)
//cl_interp_ratio                                   "1"     // Sets the interpolation amount (final amount is cl_interp_ratio / cl_updaterate).
//        *remove "//" to enable.


// ----------------------------------------------------------------------------
// Autoexec
// ----------------------------------------------------------------------------

bind "/" "toggle r_drawviewmodel 0 1"
cl_showfps 1
fps_max 70
mat_phong 0
sv_cheats 1
showconsole

cl_ejectbrass 0
cl_jiggle_bone_framerate_cutoff 0 // Turns off jigglebones
cl_new_impact_effects 0
cl_show_splashes 0
func_break_max_pieces 0
glow_outline_effect_enable 0 // Cart glow effect.
mp_decals 9  // `9' is a good value to still see the spread pattern from a scatter gun without any real performance loss.
r_flashlightdepthtexture 0
r_forcewaterleaf 1
r_lightaverage 0
r_maxnewsamples 2
r_maxsampledist 1
r_propsmaxdist 0
r_renderoverlayfragment 0
r_staticprop_lod 4
r_waterdrawreflection 0
r_waterdrawrefraction 1
r_waterforceexpensive 0
r_waterforcereflectentities 0
rope_averagelight 0
rope_collide 0
rope_rendersolid 0
rope_shake 0
rope_smooth 0
rope_subdiv 0
rope_wind_dist 0
tf_particles_disable_weather 1 // Disable weather effects on maps supporting
                               // it, for example, setting this to `1'
                               // disables rain effects on *_sawmill.
r_queued_ropes 1
r_queued_post_processing 0
r_threaded_client_shadow_manager 1
r_threaded_particles 1
r_threaded_renderables 1
cl_forcepreload 1 // Force preloading
cl_timeout 60
cl_showbattery 1
cl_mvm_wave_status_visible_during_wave 1

// ----------------------------------------------------------------------------
// FOV Switcher
// ----------------------------------------------------------------------------

alias fovUpOn "incrementvar viewmodel_fov -3000 3000 1"
alias fovDnOn "incrementvar viewmodel_fov -3000 3000 -1"
alias fovUpOff "invprev" 
alias fovDnOff "invnext" 
alias +fovsw "bind MWHEELUP fovUpOn; bind MWHEELDOWN fovDnON" 
alias -fovsw "bind MWHEELUP fovUpOff; bind MWHEELDOWN fovDnOff"
bind "MOUSE4" "+fovsw" 

// ----------------------------------------------------------------------------
// Network
// ----------------------------------------------------------------------------

cl_cmdrate 66
cl_interp 0.0152
cl_interp_ratio 1
cl_lagcompensation 1
cl_pred_optimize 2
cl_smooth 0
cl_smoothtime 0.01
cl_updaterate 66
rate 60000
net_graph 1
net_graphproportionalfont 0
net_graphpos 3
net_graphheight 860
net_queue_trace 1

// ----------------------------------------------------------------------------
// Disable Tutorials
// ----------------------------------------------------------------------------

cl_ask_blacklist_opt_out "1"
cl_ask_favorite_opt_out "1"
sb_dontshow_maxplayer_warning "1"
tf_explanations_backpackpanel "1"
tf_explanations_charinfo_armory_panel "1"
tf_explanations_charinfopanel "1"
tf_explanations_craftingpanel "1"
tf_explanations_discardpanel "1"
tf_explanations_store "1"
tf_training_has_prompted_for_forums "1"
tf_training_has_prompted_for_loadout "1"
tf_training_has_prompted_for_offline_practice "1"
tf_training_has_prompted_for_options "1"
tf_training_has_prompted_for_training "1"

// ----------------------------------------------------------------------------
// Micspam
// ----------------------------------------------------------------------------

alias voicealwayson "von"
alias von "+voicerecord; voice_loopback 1; alias voicealwayson voff"
alias voff "-voicerecord; voice_loopback 0; alias voicealwayson von"
bind v "voicealwayson"

// ----------------------------------------------------------------------------
// Null movement script
// ----------------------------------------------------------------------------

bind w +mfwd
bind s +mback
bind a +mleft
bind d +mright

alias +mfwd "-back;+forward;alias checkfwd +forward"
alias +mback "-forward;+back;alias checkback +back"
alias +mleft "-moveright;+moveleft;alias checkleft +moveleft"
alias +mright "-moveleft;+moveright;alias checkright +moveright"
alias -mfwd "-forward;checkback;alias checkfwd none"
alias -mback "-back;checkfwd;alias checkback none"
alias -mleft "-moveleft;checkright;alias checkleft none"
alias -mright "-moveright;checkleft;alias checkright none"
alias checkfwd none
alias checkback none
alias checkleft none
alias checkright none
alias none ""


// ----------------------------------------------------------------------------
// Echo
// ----------------------------------------------------------------------------
clear

echo Sonny's MIXED config loaded successfully.
echo Date:10/25/14 At: 23:47 CEST
echo 
echo Version: 0.2b ALPHA

alias "helpcfg" "echo This performance config is a configuration using elements from Chris`s performance config, Stabby`s config, and various other configurations that I`ve found around the internet. Alongside that, I`m also including my own knowledge in this, hopefully making this one of the best performance configs you will find.;helpcfg2"
alias "helpcfg2" "echo I hope you enjoy using my config, and if you have any problems, you can contact me on Reddit (WitheredPyre), and I`ll get back to you, or you can leave an issue report on this project`s Github page (RhapsodySL/perfconfig). Enjoy your high FPS!"

alias "setup" "echo Welcome to the setup wizard. Follow these instructions in order to set up basic changes to the config without modifying it. Please note that any commands referenced in this wizard can be used outside of it, at any time.;echo "";echo 1. FPS;echo 2. Network;echo 3. Sprays;echo 4. Shadows;echo 5. Facialfeatures;echo 6. Ragdolls;echo 7. Gibs;echo 8. Audio;setup2"
alias "setup2" "echo "";echo Once you are done, you should type 'helpcfg' to learn more about this configuration and some helpful hints.;echo """

alias "FPS" "echo Your FPS (frames-per-second) determines how smoothly your games run. That being said, it is important to keep your FPS high. When using a config like this, it is in your best interest to monitor your FPS, so you have a few options included in this config.;echo "";echo fps_max # - Set your FPS cap. 60 or above is generally a good value. Does not save between sessions.;echo rpc_showsbgraph - Show a graph showing your FPS and other useful info when pressing TAB.;fps2"
alias "FPS2" "echo rpc_hidesbgraph - Disable the graph that appears when pressing TAB.;fps3"
alias "FPS3" "echo cl_showfps 1 - Shows an unsmoothed FPS meter in the top right;echo "";echo Additionally, you can use the following commands to move the graphs position or size.;echo "";echo net_graphproportionalfont - Makes your netgraph size dependant on your resolution.;echo net_graphpos - 0 = left, 1 = right, 2 = centered, 3/higher specifies the X coordinate of the graphs left edge;fps4"
alias "FPS4" "echo net_graphheight - Modify the height of your graph for fine modification and placement. Default is 64.;echo "";FPS5"
alias "FPS5" "echo Finally, there are three convars that can increase FPS exponentially, but might be unstable on systems without four cores.;echo "";echo studio_queue_mode 0 - Gives a boost when set to 0. Might cause crashes on some systems.;FPS6"
alias "FPS6" "echo cl_threaded_bone_setup 1 - Enables threaded bones. Causes crashes on systems that don't have four cores.;echo r_queued_decals 1 - Enables queued decals. Causes crashes on systems that don't have four cores.;echo "";echo Once you are done configuring these, go ahead and type Network in console to continue.;echo """

alias "Network" "echo Network settings are what allows your game to play smoothly under certain circumstances. Misconfigured network settings can make the game feel choppy and laggy, while optimized settings can make it feel better. Below, you can choose between two commands that allow you to change your settings depending on playing conditions. If your ping is ;echo over 80 on nearby servers, you should use the Bad connection settings.;Network2"
alias "Network2" "echo "";echo rpc_goodconnection - Enable good connection settings. Use if you get a low ping to nearby servers.;echo rpc_badconnection - Enable bad connection settings. Use if you get a ping of 80+ to nearby servers normally.;echo "";echo Once you are done configuring these, go ahead and type Sprays in console to continue.;echo """

alias "Sprays" "echo Sprays are images that people can put on locations around the map. Some are helpful, some are funny, and some are plain disturbing. If you dislike them, you can disable or enable them quickly with the commands below.;Sprays2"
alias "Sprays2" "echo "";echo rpc_enablesprays - Enable sprays.;echo rpc_disablesprays - Disable sprays.;echo "";echo Once you are done configuring these, go ahead and type Shadows in console to continue.;echo """

alias "Shadows" "echo Shadows are generally eye-candy, but if you are an attentive player, you can use it to your advantage, since it can easily reveal someone around a corner. Below, you can choose between three shadow options.;Shadows2"
alias "Shadows2" "echo rpc_enableshadows - Non-intensive shadows that allow you to not lag as much, but still get some eyecandy.;echo rpc_enableshadows_noblob - Enables non-blobby shadows (high-intensity).;echo rpc_disableshadows - Disables shadows completely.;echo "";echo Once you are done configuring these, go ahead and type Facialfeatures in console to continue."

alias "Facialfeatures" "echo Facial features are what occurs to the characters faces when they talk. These are things such as eyes moving and blinking passively, and the mouth opening when they speak. This is only eyecandy, but it is pretty fun to have.;echo "";echo rpc_enablefeatures - Enables facial features.;echo rpc_enablefeatures_low - Enables low-quality facial features so you still get an FPS benefit.;Facialfeatures2"
alias "Facialfeatures2" "echo rpc_disablefeatures - Disables facial features entirely.;echo "";echo Once you are done configuring these, go ahead and type Ragdolls in console to continue.;echo """

alias "Ragdolls" "echo Ragdolls are what you get when you kill someone. They can be used as indicators that an enemy is nearby if a class that headed in that direction recently is found dead. Since they can be interacted with, they can lower FPS.;echo "";echo rpc_enableragdolls - Enable ragdolls.;echo rpc_disableragdolls - Disable ragdolls.;Ragdolls2"
alias "Ragdolls2" "echo "";echo Once you are done configuring these, go ahead and type Gibs to continue.;echo """

alias "Gibs" "echo Gibs are what results when someone is killed by an explosion, instead of a ragdoll. They stay for a while after the death, just like ragdolls, and can be interacted with. The sudden splash of gibs and the fact they can be interacted with are both factors that can cause FPS loss.;echo "";echo rpc_enablegibs - Enable gibs.; echo rpc_disablegibs - Disable gibs.;Gibs2"
alias "Gibs2" "echo "";echo Once you are done configuring these, go ahead and type Audio.;echo """

alias "Audio" "echo Audio settings are only used to enhance your experience, and generally provide no FPS benefit. Regardless, there are some settings you can modify that were not quite included in the default Settings.;echo "";echo dsp_enhance_stereo - When set to 1, provides a neat surround sound effect.;Audio2"
alias "Audio2" "echo snd_mixahead 0.05 - By default, TF2 makes sounds play 100ms later after they happened (0.1). You can lower this, but at a certain point there is static. 0.05 is generally a safe value, while 0.04 might work for others.;echo "";Audio3"
alias "Audio3" "echo Congratulations, you have finished the wizard! All changes will be saved, even between restarts. Now go on and start playing with better FPS than ever before!;echo If you want some extra settings to modify that you may like, type Extras.;echo """

alias "Extras" "echo These extras are some nice convars that I found by browsing the internet and looking through lists. They are not performance related, but you might appreciate them anyhow.;echo "";echo cl_showbattery - Tells you whether you are on AC or unplugged if you have a laptop. Requires cl_showfps 1;echo cl_mvm_wave_status_visible_during_wave 1 - Shows bots remaining without having to show scoreboard;Extras2"
alias "Extras2" "echo cl_use_tournament_specgui 1 - Shows alive player's health in tournament mode or MvM, when you are dead.;echo hud_combattext_batching 1 - Batches together damage text if done within a short period of time.;echo hud_combattext_batching_window # - Amount of time that numbers should stop being batched if no damage occurs.;Extras3"
alias "Extras3" "echo hud_combattext_healing 1 - Enable text that shows a target being healed;echo hud_saytext_time # - Control how long chat messages stay on screen. Default is 12;echo hud_deathnotice_time # - Control how long death notices stay on screen. Default is 6;Extras4"
alias "Extras4" "echo cl_timeout # - Set how long before timeout when you lose connection. Default is 30.;echo tf_hud_num_build_alert_beeps - How many beeps to play when your building is damaged. Default is 2.;echo tf_hud_show_servertime_limit - Whether to show server time limit on HUD;Extras5"
alias "Extras5" "echo voice_loopback 1 - Play back your voice to yourself.;echo "";echo Again, thanks for using my config!"

setup



